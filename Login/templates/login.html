<!-- 2022.06.12
{% comment %} 로그인 화면 {% endcomment %} -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 화면</title>
    {% comment %} CSS연동 {% endcomment %}
    <link rel='stylesheet' type="text/css" href="{% static 'css/login.css' %}"/>
   
</head>
<body>

{% comment %} 회원가입 {% endcomment %}
<div class="container" id="container">
  <div class="form-container sign-up-container">
    <form method="post" action="signup/" name="signup" id="signup">
      {% csrf_token %}
      <h1> 회원가입 </h1>
      <input type="text" placeholder="Id" id="account" name="account"/>
      <input type="email" placeholder="Email" id="email" name="email" />
      <input type="password" placeholder="Password" id="password" name="password"/>
      <input type="text" placeholder="Name" id="username" name="username"/>
      <button type="submit">가입하기</button>
    </form>
  </div>

  {% comment %} 로그인 {% endcomment %}
  <div class="form-container sign-in-container">
    <form method="post" action="/login/" name="login" id='login'>
      {% csrf_token %}
      <h1>로그인</h1>
      <input type="text" placeholder="Id" id="account" name="account"/>
      <input type="password" placeholder="Password" id="password" name="password"/>
     
      <button>로그인</button>
    </form>
  </div>

  {% comment %} 화면전환기능 구현파트 {% endcomment %}
  <div class="overlay-container">
    <div class="overlay">
      <div class="overlay-panel overlay-left">
        <h1>어서오세요</h1>
        <p>로그인을 진행해주세요</p>
        <button class="ghost" id="signIn">로그인</button>
      </div>
      <div class="overlay-panel overlay-right">
        <h1>반가워요!</h1>
        <p>정보를 입력해주세요!</p>
        <button class="ghost" id="signUp">회원가입</button>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/account.js' %}"></script>
<script src="text/javascript">
    // 로그인 폼 제출에 대한 이벤트 핸들러 
 $(document).ready(function(){
    $("form[name=signup]").submit(function(e){
      event.preventDefault(); // form 제출기능 비활성화

      // 폼 데이터 가져오기
      var formData = $(this).serialize();

      // AJAX 요청 보내기
      $.ajax({
        type: 'POST'
        url:'/singup/'
        data:formData
        success: function(response){
          // 성공하였을때 실행되는 코드이다.
          console.log(response);
        },
        error: function(xhr, errmsg, err){
          // 오류를 처리할 코드 
          console.log(xhr.status + ": " + xhr.responseText);
        }
      });
    });
/* ---------------------------------------------------------------------------------*/
    $("form[name=login]").submit(function(){
      event.preventDefault(); // 원래의 로그인 submit 기능 방지함
      
      var formData = $(this).serialize(); // 기존의 form 데이터 가져오기
      
        // AJAX 요청 보내기
        $.ajax({
        type: 'POST'
        url:'/login'
        data:formData
        success: function(response){
          // 성공하였을때 실행되는 코드이다.
          console.log(response);
        },
        error: function(xhr, errmsg, err){
          // 오류를 처리할 코드 
          console.log(xhr.status + ": " + xhr.responseText);
        }

      });
    });

      // 회원가입과 로그인 폼 사이의 전환 기능
      $('#signIn').click(function() {
      $('#container').removeClass("right-panel-active");
    });

    $('#signUp').click(function() {
      $('#container').addClass("right-panel-active");
    });

    });

</script>
</body>
</html>